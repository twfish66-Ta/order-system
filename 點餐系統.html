<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é»é¤è¨ˆåƒ¹ç³»çµ±</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ä½¿ç”¨ Google å­—é«” Inter å’Œ Noto Sans TC */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
        }
        /* æŒ‰éˆ•é»æ“Šæ™‚çš„å‹•ç•«æ•ˆæœ */
        .btn-press {
            transform: scale(0.95);
            transition: transform 0.1s ease-in-out;
        }
        /* é …ç›®è¢«é¸ä¸­æ™‚çš„æ¨£å¼ */
        .item-selected {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
            background-color: #EBF8FF;
        }
        /* ç¦ç”¨æŒ‰éˆ•çš„æ¨£å¼ */
        .disabled-btn {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #9CA3AF; /* æ›´æ˜é¡¯çš„ç¦ç”¨é¡è‰² */
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-2 sm:p-4">

    <!-- ä¸»å®¹å™¨ -->
    <div class="w-full max-w-4xl mx-auto bg-white rounded-2xl shadow-lg p-3 md:p-6">
        
        <!-- ä¸»å…§å®¹å€å¡Š -->
        <div class="w-full pt-6">
            <!-- å•†å“åˆ—è¡¨å®¹å™¨ (Grid ä½ˆå±€) -->
            <div id="items-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2">
                <!-- èœå–®é …ç›®èˆ‡é‡è¨­æŒ‰éˆ•å°‡æœƒè¢«æ’å…¥åˆ°é€™è£¡ -->
            </div>

            <!-- æ§åˆ¶å€å¡Š -->
            <div class="mt-6">
                <!-- ç¸½é‡‘é¡æ–¹æ ¼ -->
                <div class="bg-blue-600 text-white p-4 rounded-lg w-full flex items-center justify-between shadow-lg">
                    <h2 class="text-lg font-semibold">ç¸½é‡‘é¡</h2>
                    <span id="total-price" class="text-2xl font-bold">NT$ 0</span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- è³‡æ–™å®šç¾© ---
            const menuItems = [
                { id: 1, name: 'å†°ç´…èŒ¶', price: 25, emoji: 'ğŸ¥¤' },
                { id: 2, name: 'è›‹çµ²ã€ç«è…¿æ¶¼éºµ', price: 70, emoji: 'ğŸœ' },
                { id: 3, name: 'ç‡»é›æ¶¼éºµ', price: 80, emoji: 'ğŸœ' },
                { id: 4, name: 'æ¾å‚è‚‰æ¶¼éºµ', price: 90, emoji: 'ğŸœ' },
                { id: 5, name: 'ç‡’è‚‰åˆˆåŒ…', price: 85, emoji: 'ğŸ”' },
                { id: 6, name: 'é´¨è³åˆˆåŒ…', price: 95, emoji: 'ğŸ”' },
                { id: 7, name: 'åŠ è›‹', price: 15, emoji: 'ğŸ¥š' },
                { id: 8, name: 'ç‚¸ç‰©', price: 30, emoji: 'ğŸŸ' },
                { id: 9, name: 'å†°æ²™', price: 50, emoji: 'ğŸ§' },
                { id: 10, name: 'ç«¹ç‚­æ°´', price: 20, emoji: 'ğŸ’§' },
                { id: 11, name: 'èˆ’è·‘', price: 30, emoji: 'ğŸ¥¤' }
            ];

            // --- å…ƒç´ é¸å– ---
            const itemsContainer = document.getElementById('items-container');
            const totalPriceEl = document.getElementById('total-price');

            // --- å‡½å¼å®šç¾© ---
            
            /**
             * æ ¹æ“š menuItems é™£åˆ—å‹•æ…‹ç”Ÿæˆèœå–®å’Œæ§åˆ¶é … HTML
             */
            function renderMenuItems() {
                itemsContainer.innerHTML = ''; // æ¸…ç©ºç¾æœ‰å…§å®¹
                
                menuItems.forEach(itemData => {
                    const itemHTML = `
                        <div class="item relative flex flex-col items-center justify-around bg-white p-2 rounded-lg transition-all duration-200 h-28 cursor-pointer border-2 border-transparent shadow-md hover:shadow-lg" data-id="${itemData.id}" data-price="${itemData.price}" data-name="${itemData.name}">
                            <div class="text-center">
                                <span class="text-3xl">${itemData.emoji}</span>
                                <p class="text-base font-semibold text-gray-800 leading-tight">${itemData.name}</p>
                                <p class="text-base text-gray-500">NT$ ${itemData.price}</p>
                            </div>
                            <div>
                                <span class="quantity text-xl font-semibold text-gray-900 w-8 text-center">0</span>
                            </div>
                            <button class="minus-btn absolute bottom-1.5 right-1.5 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-lg font-bold shadow-md hover:bg-red-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-400 disabled-btn">-</button>
                        </div>
                    `;
                    itemsContainer.insertAdjacentHTML('beforeend', itemHTML);
                });

                const resetBtnHTML = `
                    <div id="reset-btn" class="flex flex-col items-center justify-center bg-gray-700 p-2 rounded-lg transition-all duration-200 h-28 cursor-pointer shadow-md hover:bg-gray-800 text-white">
                        <span class="text-3xl">ğŸ”„</span>
                        <p class="text-lg font-semibold mt-1 leading-tight">å…¨éƒ¨é‡è¨­</p>
                    </div>
                `;
                itemsContainer.insertAdjacentHTML('beforeend', resetBtnHTML);
            }

            function updateTotal() {
                let currentTotal = 0;
                const items = document.querySelectorAll('.item'); 
                
                items.forEach(item => {
                    const price = parseInt(item.dataset.price);
                    const quantity = parseInt(item.querySelector('.quantity').textContent);
                    const minusBtn = item.querySelector('.minus-btn');
                    currentTotal += price * quantity;

                    if (quantity > 0) {
                        item.classList.add('item-selected');
                        minusBtn.classList.remove('disabled-btn');
                    } else {
                        item.classList.remove('item-selected');
                        minusBtn.classList.add('disabled-btn');
                    }
                });
                
                totalPriceEl.textContent = 'NT$ ' + currentTotal;
            }
            
            function setupEventListeners() {
                itemsContainer.addEventListener('click', (e) => {
                    const item = e.target.closest('.item');
                    const minusBtn = e.target.closest('.minus-btn');
                    const resetButton = e.target.closest('#reset-btn');

                    if (resetButton) {
                        const allQuantities = document.querySelectorAll('.quantity');
                        allQuantities.forEach(quantityEl => {
                            quantityEl.textContent = '0';
                        });
                        updateTotal();
                        resetButton.classList.add('btn-press');
                        setTimeout(() => resetButton.classList.remove('btn-press'), 100);
                        return;
                    }

                    if (!item) return;

                    const quantityEl = item.querySelector('.quantity');
                    let quantity = parseInt(quantityEl.textContent);
                    
                    if (minusBtn) {
                        if (quantity > 0) {
                            quantity--;
                        }
                        minusBtn.classList.add('btn-press');
                        setTimeout(() => minusBtn.classList.remove('btn-press'), 100);
                    } 
                    else {
                        quantity++;
                        item.classList.add('btn-press');
                        setTimeout(() => item.classList.remove('btn-press'), 100);
                    }
                    
                    quantityEl.textContent = quantity;
                    updateTotal();
                });
            }

            // --- åˆå§‹åŒ– ---
            renderMenuItems();
            updateTotal();
            setupEventListeners(); 
        });
    </script>
</body>
</html>
